From 17aab947b66e217550190e2e02500e49ed3ac497 Mon Sep 17 00:00:00 2001
From: Duncan Macleod <duncan.macleod@ligo.org>
Date: Fri, 13 Dec 2019 10:39:25 +0000
Subject: [PATCH] lalapps: fix python3 imports in string_final

---
 lalapps/src/string/lalapps_string_final.py | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

diff --git a/lalapps/src/string/lalapps_string_final.py b/lalapps/src/string/lalapps_string_final.py
index 5d73b4e1e2..757152f5d5 100644
--- a/src/string/lalapps_string_final.py
+++ b/src/string/lalapps_string_final.py
@@ -34,7 +34,14 @@ from __future__ import print_function
 
 
 import bisect
-import copy_reg
+try:
+    import copyreg
+    import pickle
+    import queue
+except ImportError:  # python < 3
+    import copy_reg as copyreg
+    import cPickle as pickle
+    import Queue as queue
 import heapq
 import itertools
 from optparse import OptionParser
@@ -42,12 +49,10 @@ import math
 from matplotlib import patches
 import numpy
 import os
-import cPickle as pickle
 import random
 import select
 from scipy import interpolate
 from scipy import optimize
-import Queue as queue
 import sqlite3
 import sys
 import traceback
@@ -84,7 +89,7 @@ __version__ = "git id %s" % git_version.id
 __date__ = git_version.date
 
 
-copy_reg.pickle(lal.LIGOTimeGPS, lambda gps: (lal.LIGOTimeGPS, (gps.gpsSeconds, gps.gpsNanoSeconds)))
+copyreg.pickle(lal.LIGOTimeGPS, lambda gps: (lal.LIGOTimeGPS, (gps.gpsSeconds, gps.gpsNanoSeconds)))
 
 
 #
-- 
2.23.0

